

<!doctype html>
<html lang="zh" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>提交流程 - CMRC 2018</title>







<meta property="og:locale" content="zh">
<meta property="og:site_name" content="CMRC 2018">
<meta property="og:title" content="提交流程">


  <link rel="canonical" href="https://hfl-rc.github.io/cmrc2018/submission/">
  <meta property="og:url" content="https://hfl-rc.github.io/cmrc2018/submission/">







  

  










  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://hfl-rc.github.io/cmrc2018",
      "logo": "https://hfl-rc.github.io/cmrc2018/images/"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Evaluation Committee of Chinese Machine Reading Comprehension",
      "url" : "https://hfl-rc.github.io/cmrc2018",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://hfl-rc.github.io/cmrc2018/feed.xml" type="application/atom+xml" rel="alternate" title="CMRC 2018 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://hfl-rc.github.io/cmrc2018/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="57x57" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://hfl-rc.github.io/cmrc2018/images/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="https://hfl-rc.github.io/cmrc2018/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://hfl-rc.github.io/cmrc2018/images/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://hfl-rc.github.io/cmrc2018/images/manifest.json">
<link rel="mask-icon" href="https://hfl-rc.github.io/cmrc2018/images/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="msapplication-TileImage" content="https://hfl-rc.github.io/cmrc2018/images/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://hfl-rc.github.io/cmrc2018/">CMRC 2018</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/task">任务介绍</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/submission">提交流程</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/leaderboard_dev">系统排名</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/program">大会议程</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/committee">评测委员会</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://cmrc2018.wordpress.com">官方博客</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://www.cips-cl.org/static/CCL2018/index.html">CCL2018</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://hfl-rc.github.io/cmrc2018/english">English</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://www.hfl-tek.com/cmrc/">往期评测</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    





<div id="main" role="main">
  



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="提交流程">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">提交流程
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
<aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-gears"></i> </h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">重要说明</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">提交开发集/测试集系统</a></li>
  <li><a href="#codalab" id="markdown-toc-codalab">注册Codalab账户</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">上传代码&amp;运行源程序</a>    <ul>
      <li><a href="#section-3" id="markdown-toc-section-3">1. 新建工作目录</a></li>
      <li><a href="#section-4" id="markdown-toc-section-4">2. 设置工作目录权限（非常重要！）</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">3. 打包上传解码源程序</a></li>
      <li><a href="#section-6" id="markdown-toc-section-6">4. 复制官方试验集/开发集，评测脚本</a></li>
      <li><a href="#section-7" id="markdown-toc-section-7">5. 对试验集进行解码</a></li>
      <li><a href="#section-8" id="markdown-toc-section-8">6. 等待程序运行完毕</a></li>
      <li><a href="#section-9" id="markdown-toc-section-9">7. 将结果输出为文件</a></li>
      <li><a href="#section-10" id="markdown-toc-section-10">8. 对输出结果进行评价</a></li>
    </ul>
  </li>
  <li><a href="#docker" id="markdown-toc-docker">常用Docker</a></li>
  <li><a href="#section-11" id="markdown-toc-section-11">常见问题（持续更新中）</a></li>
  <li><a href="#section-12" id="markdown-toc-section-12">联系我们</a></li>
</ul>

  </nav>
</aside>

<h2 id="section">重要说明</h2>
<ol>
  <li>本次系统提交使用的是<a href="http://worksheets.codalab.org">CodaLab在线提交系统</a>。</li>
  <li>由于本届评测报名人数较多，为了保证评测过程的顺利进行，<strong>所有系统必须通过CodaLab进行提交，不接受线下调试</strong>，敬请谅解。</li>
  <li><strong>请各参赛队伍一定充分预留时间熟悉Codalab平台</strong>，避免最终提交失败。难点在配置运行环境上，如采用了较多的第三方库或对版本要求较高则可能需要自行配置docker。若只使用单一的深度学习库，例如Theano/Tensorflow/PyTorch/Keras等则可参考下方<strong>常用Docker一节自行选择</strong>。</li>
  <li>暂不接受未报名参加人员的测试请求，请在本届评测结束后发送请求。</li>
  <li>请在离线环境解码成功后再上传至Codalab，避免计算资源的浪费。</li>
  <li>官方Tutorial，请参考：<a href="https://github.com/codalab/codalab-worksheets/wiki">https://github.com/codalab/codalab-worksheets/wiki</a></li>
</ol>

<h2 id="section-1">提交开发集/测试集系统</h2>

<p><strong>请填写下列表单提交系统验证：<a href="https://wj.qq.com/s/2130375/3f22">提交表单</a></strong></p>

<p>为了确保系统能够在测试集上正常运行，请参赛队伍务必在开发集系统验证期间提交系统，保证系统的顺利运行。
通常情况下，系统结果将在1个工作日内上传至官方排行榜中（排行榜非匿名）。</p>

<p><strong>【注意事项】</strong></p>

<ol>
  <li>本周开始（2018年7月2日周一），每个报名队伍每周可同时提交两个系统，以避免提交最终系统时因细微参数差别导致结果大幅变化。截止至系统验证结束（即8月7日）共计6周，即最多6次提交机会，每周一重置提交权限。</li>
  <li>每周只允许提交一次结果，即6次提交需分散在6周，如某一周没有提交，则当周提交机会自动作废。</li>
  <li>本次评测不限制使用外部资源，允许合理使用外部资源提升系统性能（但需在最终的系统描述中说明）。</li>
  <li>开发集、预测试集的结果不影响评测的最终排名，仅供参考。</li>
  <li>由于参赛人数较多，评测委员会不接受Codalab以外的验证方式，敬请谅解。</li>
  <li>所有系统必须在2018年8月7日前至少提交一次系统，否则将失去在隐藏测试集上的验证机会。</li>
  <li>若在3个工作日内仍未见到结果更新至排行榜，请发送邮件至cmrc2018@126.com。</li>
</ol>

<h2 id="codalab">注册Codalab账户</h2>
<p>请根据实际情况填写注册表单，注册流程不再赘述。注册链接：<a href="https://worksheets.codalab.org/account/signup">Codalab注册</a></p>

<h2 id="section-2">上传代码&amp;运行源程序</h2>
<p>以下以官方提供的Random Guess Tutorial为例进行说明。地址：<a href="https://worksheets.codalab.org/worksheets/0x770ae55f065d454c9437182f5240fdb3/">Codalab</a></p>

<h3 id="section-3">1. 新建工作目录</h3>

<p>注册完毕之后，登陆到系统中。点击右上角的My Dashboard<br />
<img src="../images/submit-1.png" alt="image-left" />
<br /></p>

<p>新建一个Worksheet，名称可以根据实际情况填写<br />
<img src="../images/submit-2.png" alt="image-left" />
<br />
<img src="../images/submit-3.png" alt="image-left" />
<br /></p>

<h3 id="section-4">2. 设置工作目录权限（非常重要！）</h3>
<p>进入到新建的worksheet，首先设置该worksheet的权限<br />
<strong>注意:请一定在上传任何数据之前设置权限，否则可能导致源代码泄露！</strong></p>

<p>设置<code class="highlighter-rouge">cmrc2018-official</code>用户组对当前worksheet的权限为<strong>read</strong>。<br />
<code class="highlighter-rouge">&gt; cl wperm . cmrc2018-official read</code></p>

<p>设置<code class="highlighter-rouge">public</code>用户组（全体用户）对当前worksheet的权限为<strong>none</strong>。<br />
<code class="highlighter-rouge">&gt; cl wperm . public none</code></p>

<p>此时右侧worksheet属性应显示如下：<br />
<img src="../images/submit-4.png" alt="image-left" />
<br /></p>

<h3 id="section-5">3. 打包上传解码源程序</h3>
<p>请将所有解码相关文件打包成zip文件上传至worksheet中，请耐心等待上传过程。上传完毕后压缩包将自行解压。如文件较少也可以逐一上传。</p>

<h3 id="section-6">4. 复制官方试验集/开发集，评测脚本</h3>
<p>官方公开集合worksheet地址： <a href="https://worksheets.codalab.org/worksheets/0x92a80d2fab4b4f79a2b4064f7ddca9ce/">Codalab</a><br />
本例中，我们将解码试验集(trial data)，首先运行下列命令进行试验集数据的拷贝：<br />
<code class="highlighter-rouge">&gt; cl add bundle 0xcd4c755829064426896ef942a249aced .</code><br />
<strong>注意：提交系统验证时，必须使用官方的开发集Bundle（通过cl add bundle添加，而非自行上传），否则无法进行测试。</strong></p>

<p><img src="../images/submit-5.png" alt="image-left" />
<br /></p>

<h3 id="section-7">5. 对试验集进行解码</h3>
<p>参赛选手运行自定义的解码命令，在本例中我们使用如下命令，<br />
<code class="highlighter-rouge">
&gt; cl run cmrc2018_trial.json:cmrc2018_trial.json random_guess.py:random_guess.py tokenizers:tokenizers "python random_guess.py cmrc2018_trial.json predictions.out" -n run-predictions
</code></p>

<ul>
  <li>
    <p><code class="highlighter-rouge">random_guess.py</code>依赖nltk，故需要在worksheet中上传nltk离线调用包</p>
  </li>
  <li>如果需要其他环境依赖，可在命令中添加<br />
<code class="highlighter-rouge">--request-docker-image tboquet/kenacuthe7hc5</code><br />
其中<code class="highlighter-rouge">tboquet/kenacuthe7hc5</code>可替换成自己需要的环境docker，该包中提供了常见的深度学习所使用的库(主要为Anaconda+Theano+Keras)。</li>
  <li>选择适合自己程序的环境包：<a href="https://github.com/codalab/codalab-worksheets/wiki/Execution#overview-how-the-worker-system-works">https://github.com/codalab/codalab-worksheets/wiki/Execution#overview-how-the-worker-system-works</a></li>
  <li>参赛队伍也可自行对运行环境进行打包，上传至docker并调用。</li>
  <li>常用的docker请参考下方的“常用Docker”一栏。</li>
</ul>

<h3 id="section-8">6. 等待程序运行完毕</h3>
<p>Codalab上的运行状态包含如下几种：<br /></p>

<ul>
  <li><code class="highlighter-rouge">created</code>: 表示任务刚刚创建<br /></li>
  <li><code class="highlighter-rouge">staged</code>: 准备开始运行<br /></li>
  <li><code class="highlighter-rouge">running</code>: 正在正常运行<br /></li>
  <li><code class="highlighter-rouge">failed</code>: 程序错误退出<br /></li>
</ul>

<p>如果出错，则根据stderr的输出对自己的程序进行调试。</p>

<p>程序运行完成后会显示为：<code class="highlighter-rouge">ready</code><br />
<img src="../images/submit-6.png" alt="image-left" />
<br /></p>

<h3 id="section-9">7. 将结果输出为文件</h3>
<p><strong>运行下列命令将结果输出为文件，提交系统时，需要提供该bundle的UUID</strong><br />
<code class="highlighter-rouge">&gt; cl make run-predictions/predictions.out -n predictions-trial.out</code><br />
<img src="../images/submit-7.png" alt="image-left" />
<br /></p>

<h3 id="section-10">8. 对输出结果进行评价</h3>
<p><code class="highlighter-rouge">&gt; cl run predictions-trial.out:predictions-trial.out cmrc2018_trial.json:cmrc2018_trial.json cmrc2018_evaluate.py:cmrc2018_evaluate.py tokenizers:tokenizers "python cmrc2018_evaluate.py cmrc2018_trial.json predictions-trial.out"</code><br /></p>

<p>运行结束后，右侧会显示预测结果，如下图<br />
<strong>注意：Random Guess存在随机性，结果不唯一。</strong><br />
<img src="../images/submit-8.png" alt="image-left" />
<br /></p>

<h2 id="docker">常用Docker</h2>
<p>Codalab上需要加载自己的环境文件，现在有一些共享的环境供大家参考。
或者大家也可自行在<a href="http://hub.docker.com">http://hub.docker.com</a>中搜索自己需要的环境&amp;版本。<br />
<img src="../images/docker_hub.png" alt="image-left" />
<br />
以下是常用的docker（以下命令加在运行测试脚本时）：</p>

<p><strong>1. Theano + Keras</strong>:
<code class="highlighter-rouge">
--request-docker-image tboquet/kenacuthe7hc5
</code></p>

<p><strong>2. Tensorflow</strong>:
<code class="highlighter-rouge">
--request-docker-image tensorflow/tensorflow
</code></p>

<p><strong>3. CNTK</strong>:
<code class="highlighter-rouge">
--request-docker-image microsoft/cntk
</code></p>

<p><strong>4. PyTorch</strong>:
<code class="highlighter-rouge">
--request-docker-image floydhub/pytorch
</code></p>

<p><strong>5. LTP</strong>:
<code class="highlighter-rouge">
--request-docker-image scorpio147wbh/ltp
</code></p>

<p><strong>6. Anaconda</strong>:
<code class="highlighter-rouge">
--request-docker-image continuumio/anaconda
</code></p>

<p><strong>7. Tensorlayer</strong>:
<code class="highlighter-rouge">
--request-docker-image gmueller/tensorlayer
</code></p>

<p><strong>8. Torch</strong>:
<code class="highlighter-rouge">
--request-docker-image kaixhin/torch
</code></p>

<h2 id="section-11">常见问题（持续更新中）</h2>

<p><strong>1、python程序报import错误</strong><br />
答：请尽量自包含需要的Python包。或者使用已有的docker文件。例如需要LTP，则在http://hub.docker.com中搜索ltp，如下图<br />
<img src="../images/submit-ltp.png" alt="image-left" />
<br />
然后在运行测试程序的命令中加入
<code class="highlighter-rouge">
--request-docker-image scorpio147wbh/ltp
</code></p>

<p><strong>2、无法加载多个docker</strong><br />
答：为了保证环境的一致性，Codalab无法加载多个docker。如对环境版本要求严格，请自行配置docker并上传到<code class="highlighter-rouge">hub.docker.com</code>上，并在使用时加载对应的docker。</p>

<p><strong>3、如何使用GPU资源</strong><br />
答：Codalab上提供了M60 GPU的支持，只需在运行命令中加入<code class="highlighter-rouge">--request-gpus 1</code>。</p>

<h2 id="section-12">联系我们</h2>
<p>如果在运行中出现问题，请联系我们：cmrc2018 [at] 126 [dot] com</p>

        
      </section>

      <footer class="page__meta">
        
        




        
      </footer>

      

      


    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
    
    
    
    
    
    <!--<li><a href="https://hfl-rc.github.io/cmrc2018/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> </a></li>-->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Evaluation Committee of Chinese Machine Reading Comprehension.  <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://hfl-rc.github.io/cmrc2018/assets/js/main.min.js"></script>








  </body>
</html>

